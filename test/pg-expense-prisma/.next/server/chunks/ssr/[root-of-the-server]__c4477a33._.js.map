{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/pjhampton/workspace/clickhouse.build/test/pg-expense-prisma/app/analytics/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\n\ninterface ExpenseStats {\n  total: {\n    count: number;\n    amount: number;\n  };\n  byCategory: Array<{\n    category: string;\n    count: number;\n    total: number;\n  }>;\n  byMonth: Array<{\n    month: string;\n    count: number;\n    total: number;\n  }>;\n  daily: Array<{\n    date: string;\n    count: number;\n    total: number;\n  }>;\n}\n\nexport default function Analytics() {\n  const [stats, setStats] = useState<ExpenseStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [loadTime, setLoadTime] = useState<number | null>(null);\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      const startTime = Date.now();\n      try {\n        const response = await fetch('/api/expenses/stats');\n        if (!response.ok) {\n          throw new Error('Failed to fetch stats');\n        }\n        const data = await response.json();\n        setStats(data);\n        setLoadTime(Date.now() - startTime);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'An error occurred');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStats();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8\">\n        <div className=\"max-w-6xl mx-auto px-4\">\n          <div className=\"text-center\">Loading analytics...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8\">\n        <div className=\"max-w-6xl mx-auto px-4\">\n          <div className=\"text-center text-red-600\">Error: {error}</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!stats) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8\">\n        <div className=\"max-w-6xl mx-auto px-4\">\n          <div className=\"text-center\">No data available</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-6xl mx-auto px-4\">\n        <div className=\"mb-6\">\n          <Link \n            href=\"/\" \n            className=\"text-blue-600 hover:text-blue-800 font-medium\"\n          >\n            ← Back to Home\n          </Link>\n        </div>\n\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">Expense Analytics</h1>\n          {loadTime && (\n            <p className=\"text-sm text-gray-700 mt-2 font-medium bg-blue-50 px-3 py-1 rounded-md inline-block\">\n              ⚡ Analytics loaded in {loadTime}ms across {stats?.total.count.toLocaleString()} expenses\n            </p>\n          )}\n        </div>\n\n        {/* Summary Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n          <div className=\"bg-white p-6 rounded-xl shadow-lg border border-gray-100\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center\">\n              <div className=\"w-2 h-2 bg-blue-500 rounded-full mr-3\"></div>\n              Total Overview\n            </h2>\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center py-2\">\n                <span className=\"text-gray-700 font-medium\">Total Expenses:</span>\n                <span className=\"font-bold text-lg text-gray-900\">{stats.total.count.toLocaleString()}</span>\n              </div>\n              <div className=\"flex justify-between items-center py-2\">\n                <span className=\"text-gray-700 font-medium\">Total Amount:</span>\n                <span className=\"font-bold text-lg text-emerald-600\">\n                  ${stats.total.amount.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center py-2\">\n                <span className=\"text-gray-700 font-medium\">Average per Expense:</span>\n                <span className=\"font-bold text-lg text-gray-900\">\n                  ${stats.total.count > 0 ? (stats.total.amount / stats.total.count).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : '0.00'}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-xl shadow-lg border border-gray-100\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center\">\n              <div className=\"w-2 h-2 bg-purple-500 rounded-full mr-3\"></div>\n              Top Category\n            </h2>\n            {stats.byCategory.length > 0 ? (\n              <div className=\"space-y-4\">\n                <div className=\"text-2xl font-bold text-purple-600\">\n                  {stats.byCategory[0].category}\n                </div>\n                <div className=\"text-gray-700 font-medium\">\n                  ${stats.byCategory[0].total.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ({stats.byCategory[0].count.toLocaleString()} expenses)\n                </div>\n                <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                  <div \n                    className=\"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full\" \n                    style={{\n                      width: `${(stats.byCategory[0].total / stats.total.amount) * 100}%`\n                    }}\n                  ></div>\n                </div>\n                <div className=\"text-sm font-medium text-gray-600\">\n                  {((stats.byCategory[0].total / stats.total.amount) * 100).toFixed(1)}% of total spending\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-gray-500 font-medium\">No expenses yet</div>\n            )}\n          </div>\n        </div>\n\n        {/* Category Breakdown */}\n        <div className=\"bg-white p-6 rounded-xl shadow-lg border border-gray-100 mb-8\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center\">\n            <div className=\"w-2 h-2 bg-indigo-500 rounded-full mr-3\"></div>\n            Spending by Category\n          </h2>\n          {stats.byCategory.length > 0 ? (\n            <div className=\"space-y-6\">\n              {stats.byCategory.map((category, index) => (\n                <div key={category.category} className=\"space-y-3\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"font-bold text-gray-900 text-lg\">{category.category}</span>\n                    <span className=\"text-gray-700 font-semibold\">\n                      ${category.total.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ({category.count.toLocaleString()} expenses)\n                    </span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 rounded-full h-4\">\n                    <div \n                      className={`h-4 rounded-full bg-gradient-to-r ${\n                        index === 0 ? 'from-indigo-500 to-indigo-600' :\n                        index === 1 ? 'from-emerald-500 to-emerald-600' :\n                        index === 2 ? 'from-orange-500 to-orange-600' :\n                        index === 3 ? 'from-pink-500 to-pink-600' :\n                        index === 4 ? 'from-cyan-500 to-cyan-600' :\n                        'from-gray-500 to-gray-600'\n                      }`}\n                      style={{\n                        width: `${(category.total / stats.total.amount) * 100}%`\n                      }}\n                    ></div>\n                  </div>\n                  <div className=\"text-sm font-medium text-gray-700\">\n                    {((category.total / stats.total.amount) * 100).toFixed(1)}% of total spending\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-gray-500 font-medium\">No expenses to analyze</div>\n          )}\n        </div>\n\n        {/* Monthly Trends */}\n        <div className=\"bg-white p-6 rounded-xl shadow-lg border border-gray-100 mb-8\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center\">\n            <div className=\"w-2 h-2 bg-emerald-500 rounded-full mr-3\"></div>\n            Monthly Spending\n          </h2>\n          {stats.byMonth.length > 0 ? (\n            <div className=\"space-y-4\">\n              {stats.byMonth.map((month, index) => (\n                <div key={month.month} className=\"flex justify-between items-center p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg hover:shadow-md transition-shadow\">\n                  <span className=\"font-bold text-gray-900\">\n                    {new Date(month.month).toLocaleDateString('en-US', { \n                      year: 'numeric', \n                      month: 'long' \n                    })}\n                  </span>\n                  <div className=\"text-right\">\n                    <div className=\"font-bold text-lg text-emerald-600\">${month.total.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</div>\n                    <div className=\"text-sm font-medium text-gray-700\">{month.count.toLocaleString()} expenses</div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-gray-500 font-medium\">No monthly data available</div>\n          )}\n        </div>\n\n        {/* Recent Daily Activity */}\n        <div className=\"bg-white p-6 rounded-xl shadow-lg border border-gray-100\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center\">\n            <div className=\"w-2 h-2 bg-orange-500 rounded-full mr-3\"></div>\n            Recent Daily Activity\n          </h2>\n          {stats.daily.length > 0 ? (\n            <div className=\"space-y-3\">\n              {stats.daily.slice(0, 10).map((day, index) => (\n                <div key={day.date} className=\"flex justify-between items-center py-3 px-4 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg hover:shadow-md transition-all\">\n                  <span className=\"font-bold text-gray-900\">\n                    {new Date(day.date).toLocaleDateString('en-US', {\n                      weekday: 'short',\n                      month: 'short',\n                      day: 'numeric'\n                    })}\n                  </span>\n                  <div className=\"text-right\">\n                    <span className=\"font-bold text-lg text-orange-600\">${day.total.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>\n                    <span className=\"text-gray-700 ml-3 font-medium\">({day.count.toLocaleString()})</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-gray-500 font-medium\">No daily data available</div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}